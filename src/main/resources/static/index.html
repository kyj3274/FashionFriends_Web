<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>패션프렌즈</title>
    <link rel="stylesheet" href="style.css?v=202512051605">

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body>

<div class="wrap" id="app-wrap">

    <nav class="desktop-sidebar">
        <h1 class="sidebar-logo"><a href="#home">Fashion Friends</a></h1>

        <ul class="sidebar-menu">
            <li><a href="#home" class="menu-item"><i class="fa-solid fa-house"></i> <span>홈</span></a></li>
            <li><a href="#closet" class="menu-item"><i class="fa-solid fa-shirt"></i> <span>내 옷장</span></a></li>
            <li><a href="#calendar" class="menu-item"><i class="fa-regular fa-calendar"></i> <span>캘린더</span></a></li>
            <li><a href="#notify" class="menu-item"><i class="fa-regular fa-bell"></i> <span>알림</span></a></li>
            <li><a href="#mypage" class="menu-item"><i class="fa-regular fa-user"></i> <span>프로필</span></a></li>
        </ul>

    </nav>


    <header class="mobile-header">
        <h1 class="logo"><a href="#home">Fashion Friends</a></h1>
        <div class="header-right">
            <button class="icon-btn" onclick="location.href='#notify'"><i class="fa-regular fa-bell"></i></button>
            <button class="icon-btn" onclick="location.href='#mypage'"><i class="fa-regular fa-user"></i></button>
        </div>
    </header>

    <main id="app-root" class="main-content">
    </main>

    <nav class="bottom-nav">
        <ul>
            <li><a href="#home" class="nav-item"><i class="fa-solid fa-house"></i></a></li>
            <li><a href="#closet" class="nav-item"><i class="fa-solid fa-shirt"></i></a></li>
            <li><a href="javascript:void(0)" class="nav-item center-add-btn" onclick="openRecordModal()"><i class="fa-solid fa-plus"></i></a></li>
            <li><a href="#calendar" class="nav-item"><i class="fa-regular fa-calendar"></i></a></li>
            <li><a href="#mypage" class="nav-item"><i class="fa-regular fa-user"></i></a></li>
        </ul>
    </nav>
</div>
<div id="login-modal" class="modal-overlay" style="display: flex;">
    <div class="bottom-sheet" style="text-align: center;">
        <h2 style="margin-bottom: 20px;">Fashion Friends</h2>

        <div class="input-group" style="margin-bottom: 15px; text-align: left;">
            <label style="font-size: 13px; color: #888;">아이디</label>
            <input type="text" id="login-id" class="input-field" placeholder="아이디 입력">
        </div>

        <div class="input-group" style="margin-bottom: 20px; text-align: left;">
            <label style="font-size: 13px; color: #888;">비밀번호</label>
            <input type="password" id="login-pw" class="input-field" placeholder="비밀번호 입력">
        </div>

        <button class="sidebar-record-btn" onclick="handleLogin()">로그인</button>

        <p style="margin-top: 15px; font-size: 13px; color: #888;">
            계정이 없으신가요?
            <a href="javascript:void(0)" onclick="openSignupModal()" style="text-decoration: underline; color:#8D6E63; font-weight:bold;">
                회원가입
            </a>
        </p>
    </div>
</div>

<div id="record-modal" class="modal-overlay">
    <div class="bottom-sheet">
        <div class="modal-header">
            <h3>오늘의 기록</h3>
            <button class="close-icon" onclick="toggleModal('record-modal', false)">&times;</button>
        </div>
        <button class="record-option-btn primary" onclick="savePhotoRecord()">
            <div class="text-box"><strong>📸 사진으로 인증</strong><span>홈 피드 공유 / 캘린더 저장</span></div>
        </button>

        <button class="record-option-btn secondary" onclick="openManualClosetModal()">
            <div class="text-box"><strong>👕 옷만 선택</strong><span>나만 보기 / 데이터 저장</span></div>
        </button>
    </div>
</div>

<div id="add-clothes-modal" class="modal-overlay">
    <div class="bottom-sheet">
        <div class="modal-header">
            <h3>새 옷 등록</h3>
            <button class="close-icon" onclick="toggleModal('add-clothes-modal', false)">&times;</button>
        </div>

        <div class="tab-menu" style="display:flex; gap:10px; margin-bottom:20px;">
            <button class="filter-chip active tab-btn" onclick="switchTab('photo', this)">사진 업로드</button>
            <button class="filter-chip tab-btn" onclick="switchTab('link', this)">링크 입력</button>
        </div>

        <div id="tab-photo" class="tab-content">
            <input type="file" id="clothes-file-input" accept="image/*" style="display: none;" onchange="previewImage(this)">
            <div id="upload-area" style="text-align:center; padding:30px; border:2px dashed #eee; border-radius:10px; margin-bottom: 20px; cursor: pointer;" onclick="document.getElementById('clothes-file-input').click()">
                <img id="preview-img" src="" style="width: 100%; max-height: 200px; object-fit: contain; display: none; border-radius: 8px;">
                <div id="upload-placeholder">
                    <i class="fa-solid fa-camera" style="font-size: 30px; color: #ccc; margin-bottom: 10px;"></i>
                    <p style="color: #999; font-size: 14px;">여기를 클릭해 사진을 올려주세요</p>
                </div>
            </div>
        </div>

        <div id="tab-link" class="tab-content" style="display:none; margin-bottom: 20px;">
            <input type="text" id="clothes-link-input" class="input-field" placeholder="이미지 URL 입력">
        </div>

        <div style="margin-bottom: 20px;">
            <label style="display:block; font-size:13px; color:#888; margin-bottom:8px;">카테고리</label>
            <select id="clothes-category-input" class="input-field">
                <option value="아우터">🧥 아우터</option>
                <option value="상의">👕 상의</option>
                <option value="하의">👖 하의</option>
                <option value="신발">👟 신발</option>
                <option value="목도리">🧣 목도리</option>
                <option value="악세서리">💍 악세서리</option>
            </select>
        </div>

        <div style="margin-bottom: 20px;">
            <label style="display:block; font-size:13px; color:#888; margin-bottom:8px;">옷 이름 (선택)</label>
            <input type="text" id="clothes-name-input" class="input-field" placeholder="예: 검정 롱패딩">
        </div>

        <button class="sidebar-record-btn" onclick="registerClothes()">등록하기</button>
    </div>
</div>

<div id="edit-profile-modal" class="modal-overlay">
    <div class="bottom-sheet">
        <div class="modal-header">
            <h3>내 정보 관리</h3>
            <button class="close-icon" onclick="toggleModal('edit-profile-modal', false)">&times;</button>
        </div>

        <div class="input-group">
            <label style="display:block; font-size:13px; color:#888; margin-bottom:8px;">닉네임</label>
            <input type="text" id="edit-nickname" class="input-field">
        </div>

        <button class="sidebar-record-btn" style="margin-top: 20px;" onclick="saveProfileChanges()">저장하기</button>
        <button class="text-btn-danger" style="width:100%; margin-top:10px; color:#E57373;" onclick="logout()">로그아웃</button>
    </div>
</div>

<div id="ai-recommend-modal" class="modal-overlay">
    <div class="bottom-sheet full-height">
        <div class="modal-header">
            <h3>AI 코디 추천</h3>
            <button class="close-icon" onclick="toggleModal('ai-recommend-modal', false)">&times;</button>
        </div>

        <p class="guide-text">오늘의 주인공이 될 옷을 골라주세요! (다중 선택 가능)</p>

        <div class="feed-filter-bar" style="margin-bottom: 15px; padding-left: 0;">
            <button class="filter-chip modal-tab-btn active" data-cat="all" onclick="filterAiItems('all', this)">전체</button>
            <button class="filter-chip modal-tab-btn" data-cat="아우터" onclick="filterAiItems('아우터', this)">🧥 아우터</button>
            <button class="filter-chip modal-tab-btn" data-cat="상의" onclick="filterAiItems('상의', this)">👕 상의</button>
            <button class="filter-chip modal-tab-btn" data-cat="하의" onclick="filterAiItems('하의', this)">👖 하의</button>
            <button class="filter-chip modal-tab-btn" data-cat="신발" onclick="filterAiItems('신발', this)">👟 신발</button>
            <button class="filter-chip modal-tab-btn" data-cat="목도리" onclick="filterAiItems('목도리', this)">🧣 목도리</button>
            <button class="filter-chip modal-tab-btn" data-cat="악세서리" onclick="filterAiItems('악세서리', this)">💍 악세서리</button>
        </div>

        <div id="ai-closet-grid" class="modal-grid-scroll" style="flex-grow: 1;">
        </div>

        <div style="margin-top: 15px; margin-bottom: 10px;">
            <input type="text" id="ai-prompt-input" class="input-field" placeholder="예: 오늘 데이트가 있어 (선택사항)">
        </div>

        <button id="btn-request-ai" class="sidebar-record-btn" onclick="requestAiRecommendation()">
            AI에게 추천받기 ✨
        </button>
    </div>
</div>

<div id="clothes-detail-modal" class="modal-overlay">
    <div class="bottom-sheet">
        <div class="modal-header">
            <h3>옷 상세 정보</h3>
            <button class="close-icon" onclick="toggleModal('clothes-detail-modal', false)">&times;</button>
        </div>

        <div style="text-align: center; margin-bottom: 20px;">
            <img id="detail-img" src="" style="width: 150px; height: 150px; object-fit: cover; border-radius: 12px; border: 1px solid #eee;">
        </div>

        <div style="margin-bottom: 20px;">
            <label style="display:block; font-size:13px; color:#888; margin-bottom:8px;">카테고리 수정</label>
            <select id="detail-category-input" class="input-field">
                <option value="아우터">🧥 아우터</option>
                <option value="상의">👕 상의</option>
                <option value="하의">👖 하의</option>
                <option value="신발">👟 신발</option>
                <option value="목도리">🧣 목도리</option>
                <option value="악세서리">💍 악세서리</option>
            </select>
        </div>

        <div style="display: flex; gap: 10px;">
            <button class="sidebar-record-btn" style="flex: 1;" onclick="updateClothes()">수정 완료</button>
            <button class="sidebar-record-btn" style="flex: 1; background: #ffebee; color: #e57373;" onclick="deleteClothes()">삭제</button>
        </div>
    </div>
</div>

<div id="ai-result-modal" class="modal-overlay">
    <div class="bottom-sheet">
    </div>
</div>

<div id="manual-record-modal" class="modal-overlay">
    <div class="bottom-sheet full-height">
        <div class="modal-header">
            <h3>옷 선택하기</h3>
            <button class="close-icon" onclick="toggleModal('manual-record-modal', false)">&times;</button>
        </div>

        <p class="guide-text">입은 옷을 모두 선택해주세요 (다중 선택 가능)</p>

        <div class="feed-filter-bar" style="margin-bottom: 15px; padding-left: 0;">
            <button class="filter-chip modal-tab-btn active" data-cat="all" onclick="filterManualItems('all', this)">전체</button>
            <button class="filter-chip modal-tab-btn" data-cat="아우터" onclick="filterManualItems('아우터', this)">🧥 아우터</button>
            <button class="filter-chip modal-tab-btn" data-cat="상의" onclick="filterManualItems('상의', this)">👕 상의</button>
            <button class="filter-chip modal-tab-btn" data-cat="하의" onclick="filterManualItems('하의', this)">👖 하의</button>
        </div>

        <div id="manual-closet-grid" class="modal-grid-scroll">
        </div>

        <button class="sidebar-record-btn" style="margin-top: 20px;" onclick="submitManualRecord()">
            선택 완료 및 저장
        </button>
    </div>
</div>
<div id="date-detail-modal" class="modal-overlay">
    <div class="bottom-sheet" style="max-height: 80vh; display: flex; flex-direction: column;">
        <div class="modal-header">
            <h3 id="detail-date-title">2025.11.14</h3>
            <button class="close-icon" onclick="toggleModal('date-detail-modal', false)">&times;</button>
        </div>

        <div id="date-log-list" style="overflow-y: auto; flex-grow: 1; padding-bottom: 20px;">
        </div>

        <button class="sidebar-record-btn" onclick="openRecordModalFromDetail()">
            + 이 날짜에 추가 기록하기
        </button>
    </div>
</div>
<div id="signup-modal" class="modal-overlay">
    <div class="bottom-sheet">
        <div class="modal-header">
            <h3>회원가입</h3>
            <button class="close-icon" onclick="toggleModal('signup-modal', false)">&times;</button>
        </div>

        <div class="input-group">
            <label>아이디</label>
            <input type="text" id="signup-id" class="input-field" placeholder="영문/숫자">
        </div>

        <div class="input-group">
            <label>비밀번호</label>
            <input type="password" id="signup-pw" class="input-field" placeholder="비밀번호">
        </div>

        <div class="input-group">
            <label>닉네임</label>
            <input type="text" id="signup-nickname" class="input-field" placeholder="앱에서 사용할 이름">
        </div>

        <div style="margin-bottom: 20px;">
            <label style="display:block; font-size:13px; color:#888; margin-bottom:8px;">평소 스타일 (중복 선택 가능)</label>
            <div class="style-select-container">
                <button class="style-chip-btn" onclick="toggleSignupStyle(this, 'MINIMAL')">#미니멀</button>
                <button class="style-chip-btn" onclick="toggleSignupStyle(this, 'CASUAL')">#캐주얼</button>
                <button class="style-chip-btn" onclick="toggleSignupStyle(this, 'STREET')">#스트릿</button>
                <button class="style-chip-btn" onclick="toggleSignupStyle(this, 'VINTAGE')">#빈티지</button>
                <button class="style-chip-btn" onclick="toggleSignupStyle(this, 'LOVELY')">#러블리</button>
                <button class="style-chip-btn" onclick="toggleSignupStyle(this, 'SPORTY')">#스포티</button>
            </div>
        </div>

        <button class="sidebar-record-btn" onclick="handleSignup()">가입 완료</button>
    </div>
</div>
<script src="script.js"></script>

<script>
    function switchTab(name, btn) {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        document.querySelectorAll('.tab-content').forEach(c => c.style.display = 'none');
        document.getElementById('tab-' + name).style.display = 'block';
    }
</script>
</body>
</html>